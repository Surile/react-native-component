{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "collapse",
  "type": "registry:component",
  "title": "Example collapse",
  "author": "@gabimoncha",
  "description": "Displays a button which is always red.",
  "registryDependencies": [
    "https://react-native-component-docs.vercel.app/r/card.json",
    "https://react-native-component-docs.vercel.app/r/cell.json",
    "https://react-native-component-docs.vercel.app/r/divider.json",
    "https://react-native-component-docs.vercel.app/r/helpers.json",
    "https://react-native-component-docs.vercel.app/r/hooks.json"
  ],
  "files": [
    {
      "path": "./node_modules/@tastien/react-native-component/src/components/collapse/collapse.tsx",
      "content": "import isUndefined from 'lodash/isUndefined';\nimport React, { useRef, useCallback, useEffect, memo } from 'react';\nimport type { LayoutChangeEvent } from 'react-native';\nimport { Animated, View } from 'react-native';\n\nimport Card from '../card';\nimport Cell from '../cell';\nimport Divider from '../divider';\n\nimport type { CollapseProps } from './interface';\nimport { easing, getArrowOutline, getDefaultValue } from '../../helpers';\nimport { useControllableValue, usePersistFn } from '../../hooks';\nimport { cn } from '../../lib/utils';\n\n/**\n * Collapse æŠ˜å é¢æ¿\n */\nconst Collapse: React.FC<CollapseProps> = ({\n  children,\n  title,\n  titleClassName,\n  titleTextClassName,\n  iconStyle,\n  iconColor,\n  iconSize,\n  bodyClassName,\n  renderTitle,\n  renderTitleExtra,\n  renderBody,\n  type = 'cell',\n  onAnimationEnd,\n  bodyPadding = true,\n  headerDivider = true,\n  bodyDivider,\n  lazyRender = true,\n  square = true,\n\n  testID,\n\n  ...restProps\n}) => {\n  bodyDivider = getDefaultValue(bodyDivider, type === 'cell');\n\n  const [collapse, onCollapse] = useControllableValue(restProps, {\n    defaultValuePropName: 'defaultCollapse',\n    valuePropName: 'collapse',\n    trigger: 'onCollapse',\n    defaultValue: false,\n  });\n  const onAnimationEndPersistFn = usePersistFn((v: boolean) => {\n    onAnimationEnd?.(v);\n  });\n  /** è®°å½•å½“å‰æ˜¯å¦å¯è§ï¼Œåœ¨ä¸æ–­ onLayout çš„æ—¶å€™å¯ä»¥æœ‰ä¸€ä¸ªåˆ¤æ–­çš„ä¾æ® */\n  const Visible = useRef(collapse);\n  const BodyHeight = useRef(0);\n  const MountedRef = useRef(false);\n  const AnimatedValue = useRef(new Animated.Value(0)).current;\n  const toggleBody = useCallback(\n    (v: boolean, immediately: boolean) => {\n      const action = Animated.timing(AnimatedValue, {\n        toValue: v ? BodyHeight.current : 0,\n        duration: immediately ? 0 : 300,\n        useNativeDriver: false,\n        easing: v ? easing.easeOutCirc : easing.easeInCubic,\n      });\n\n      action.start(({ finished }) => {\n        if (finished) {\n          onAnimationEndPersistFn(v);\n        }\n      });\n    },\n    [AnimatedValue, onAnimationEndPersistFn]\n  );\n\n  // åˆå§‹åŒ–å¥½ç»„ä»¶\n  useEffect(() => {\n    MountedRef.current = true;\n  }, []);\n\n  useEffect(() => {\n    // åŒæ­¥å½“å‰çš„çŠ¶æ€\n    Visible.current = collapse;\n\n    toggleBody(collapse, false);\n  }, [collapse, toggleBody]);\n\n  const onPressTitle = useCallback(() => {\n    onCollapse(!Visible.current);\n  }, [onCollapse]);\n\n  const onLayoutBody = useCallback(\n    (e: LayoutChangeEvent) => {\n      // æœ‰ç‚¹ç–‘æƒ‘ï¼ŒæŠ˜å çš„è¿‡ç¨‹ä¸­ï¼Œé«˜åº¦åœ¨åŠ¨æ€å˜åŒ–ï¼Œé€šè¿‡ absolute å¸ƒå±€è§£å†³æ— æ³•å®Œå…¨æ¸²æŸ“\n      BodyHeight.current = e.nativeEvent.layout.height;\n      console.log('ğŸš€ ~ Collapse ~ e.nativeEvent.layout.height:', e.nativeEvent.layout.height);\n      // å±•å¼€çš„è¿‡ç¨‹ä¸­æ‰ä¼šå­˜åœ¨åŠ¨æ€é«˜åº¦\n      if (Visible.current) {\n        // å½“æ”¶é½çš„æ—¶å€™å·²çŸ¥é«˜åº¦\n        toggleBody(Visible.current, Visible.current);\n      }\n    },\n    [toggleBody]\n  );\n\n  const ArrowOutline = getArrowOutline(collapse ? 'up' : 'down');\n  const arrowJSX = (\n    <ArrowOutline\n      style={iconStyle}\n      color={!isUndefined(iconColor) ? iconColor : '#8C9199'}\n      size={!isUndefined(iconSize) ? iconSize : 16}\n    />\n  );\n  const titleJSX = renderTitle ? renderTitle(collapse) : title;\n  const titleExtraJSX = renderTitleExtra ? renderTitleExtra(collapse, arrowJSX) : arrowJSX;\n  const bodyJSX =\n    lazyRender && !MountedRef.current && !collapse ? null : renderBody ? renderBody() : children;\n  console.log('ğŸš€ ~ cn ~ AnimatedValue:', AnimatedValue);\n\n  const ctxJSX = (\n    <Animated.View className={cn('overflow-hidden bg-white')} style={{ height: AnimatedValue }}>\n      <View\n        collapsable={false}\n        className={cn('absolute left-0 right-0 top-0')}\n        onLayout={onLayoutBody}\n      >\n        <View\n          className={cn(\n            {\n              'p-3': bodyPadding,\n            },\n            bodyClassName\n          )}\n        >\n          {bodyJSX}\n        </View>\n\n        {bodyDivider ? <Divider type='light' className='mx-3' /> : null}\n      </View>\n    </Animated.View>\n  );\n\n  if (type === 'card') {\n    return (\n      <Card\n        square={square}\n        title={titleJSX}\n        extra={titleExtraJSX}\n        headerDivider={headerDivider}\n        titleClassName={titleClassName}\n        titleTextClassName={titleTextClassName}\n        bodyPadding={false}\n        onPressHeader={onPressTitle}\n        testID={testID}\n      >\n        {ctxJSX}\n      </Card>\n    );\n  }\n\n  return (\n    <>\n      <Cell\n        title={titleJSX}\n        titleClassName={titleClassName}\n        titleTextClassName={titleTextClassName}\n        valueExtra={titleExtraJSX}\n        onPress={onPressTitle}\n        divider={headerDivider}\n        testID={testID}\n      />\n      {ctxJSX}\n    </>\n  );\n};\n\nexport default memo(Collapse);\n",
      "type": "registry:component"
    },
    {
      "path": "./node_modules/@tastien/react-native-component/src/components/collapse/index.ts",
      "content": "\nimport Collapse from './collapse'\n\nexport default Collapse; \n",
      "type": "registry:component"
    },
    {
      "path": "./node_modules/@tastien/react-native-component/src/components/collapse/interface.ts",
      "content": "import type { PropsWithChildren, ReactNode } from 'react'\nimport type {\n  StyleProp,\n  ViewStyle,\n  TextStyle,\n  ColorValue,\n  ViewProps,\n} from 'react-native'\n\nexport interface CollapseProps\n  extends PropsWithChildren<{}>,\n    Pick<ViewProps, 'testID'> {\n  /**\n   * æ ‡é¢˜\n   */\n  title?: ReactNode\n\n  /**\n   * æ ‡é¢˜æ ·å¼\n   */\n  titleClassName?: string\n\n  /**\n   * æ ‡é¢˜æ–‡å­—æ ·å¼\n   */\n  titleTextClassName?: string\n\n  /**\n   * æ ‡é¢˜å›¾æ ‡æ ·å¼\n   */\n  iconStyle?: StyleProp<ViewStyle>\n\n  /**\n   * æ ‡é¢˜å›¾æ ‡é¢œè‰²\n   * @default collapse_title_icon_color\n   */\n  iconColor?: ColorValue\n\n  /**\n   * æ ‡é¢˜å›¾æ ‡å¤§å°\n   * @default collapse_title_icon_size\n   */\n  iconSize?: number\n\n  /**\n   * å­å…ƒç´ /å†…å®¹å¸ƒå±€æ ·å¼\n   */\n  bodyClassName?: string\n\n  /**\n   * è‡ªå®šä¹‰æ¸²æŸ“æ ‡é¢˜\n   */\n  renderTitle?: (collapse: boolean) => ReactNode\n\n  /**\n   * è‡ªå®šä¹‰æ¸²æŸ“æ ‡é¢˜å³ä¾§\n   */\n  renderTitleExtra?: (collapse: boolean, arrowJSX: ReactNode) => ReactNode\n\n  /**\n   * è‡ªå®šä¹‰æ¸²æŸ“å†…å®¹ï¼Œæ›¿æ¢ children\n   */\n  renderBody?: () => ReactNode\n\n  /**\n   * æ˜¯å¦å±•å¼€\n   */\n  collapse?: boolean\n\n  /**\n   * é»˜è®¤çŠ¶æ€æ˜¯å¦å±•å¼€\n   */\n  defaultCollapse?: boolean\n\n  /**\n   * çŠ¶æ€æ”¹å˜çš„å›è°ƒ\n   */\n  onCollapse?: (collapse: boolean) => void\n\n  /**\n   * æ¨¡å¼ã€åœºæ™¯\n   * @default 'cell'\n   */\n  type?: 'cell' | 'card'\n\n  /**\n   * åŠ¨ç”»ç»“æŸçš„å›è°ƒï¼Œæ³¨æ„ç»„ä»¶æ¸²æŸ“é—®é¢˜ï¼Œä¼šå­˜åœ¨å¤šæ¬¡å›è°ƒ\n   */\n  onAnimationEnd?: (collapse: boolean) => void\n\n  /**\n   * å†…å®¹åŒºåŸŸæ˜¯å¦æœ‰å†…è¾¹è·\n   * @default true\n   */\n  bodyPadding?: boolean\n\n  /**\n   * å¤´éƒ¨åŒºåŸŸæ˜¯å¦æœ‰åˆ†å‰²çº¿\n   * @default true\n   */\n  headerDivider?: boolean\n\n  /**\n   * å†…å®¹åŒºåŸŸæ˜¯å¦æœ‰åˆ†å‰²çº¿ï¼Œcell é»˜è®¤ trueï¼Œcard é»˜è®¤false\n   */\n  bodyDivider?: boolean\n\n  /**\n   * æ˜¯å¦åœ¨å±•å¼€çš„æ—¶å€™æ‰æ¸²æŸ“å­å…ƒç´ \n   * @default true\n   */\n  lazyRender?: boolean\n\n  /**\n   * æ˜¯å¦ä¸ºæ–¹å½¢ï¼Œä»…å¯¹ card ç±»å‹æœ‰æ•ˆ\n   * @default true\n   */\n  square?: boolean\n}\n",
      "type": "registry:component"
    }
  ]
}